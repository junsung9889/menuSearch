# 🤖 AI 강화 메뉴 검색 프로그램

OpenAI API와 벡터 임베딩을 결합한 지능형 한국어 메뉴 검색 시스템

## ✨ 주요 기능

### 🚀 **AI 강화 검색 (NEW!)**
- **자연어 처리**: "이번달 카드 얼마나 썼을까?" 같은 자연어 입력 지원
- **AI 요약 키워드**: OpenAI API로 전체 문장을 가장 잘 표현하는 한 단어 생성 (복합어 포함)
- **AI 대표 검색어**: 각 메뉴별로 AI가 생성한 최적 검색어 5개로 임베딩 가중치 강화
- **지능형 선택**: AI가 최적의 메뉴 하나를 최종 추천

### 🔍 **벡터 임베딩 검색**
- **의미적 유사도**: 단순한 키워드 매칭을 넘어선 의미 이해
- **다중 모델 지원**: 5개 이상의 한국어 특화 모델
- **자동 모델 선택**: 성능 순서대로 자동 로드

## 🧠 AI 검색 프로세스

```
1️⃣ AI 대표 검색어 생성 → 2️⃣ 자연어 입력 → 3️⃣ AI 요약 키워드 → 4️⃣ 가중치 벡터 검색 → 5️⃣ AI 최종 선택
```

### 실제 예시:
```
0단계(초기화): 각 메뉴별 AI 대표 검색어 5개 생성 및 저장
 ↓
입력: "이번달 카드 얼마나 썼을까"
 ↓
AI 요약 키워드: "카드이용내역"
 ↓
가중치 벡터 검색: 대표 검색어로 강화된 임베딩으로 상위 5개 후보
 ↓
AI 최종 선택: "카드 명세서"
```

## 🏆 지원 모델

1. **multilingual-e5-small** 🥇 (최고 성능: 94.48% 유사도)
2. **ko-sroberta-multitask** 🥈 (한국어 특화: 85.23% 유사도)  
3. **distiluse-base-multilingual-cased-v2** 🥉 (고속 처리)
4. **all-mpnet-base-v2** (영어 중심 고성능)
5. **paraphrase-multilingual-MiniLM-L12-v2** (다국어 지원)

## 📦 설치

### 1️⃣ 의존성 설치
```bash
pip install -r requirements.txt
```

### 2️⃣ OpenAI API 키 설정
```bash
# 환경변수로 설정 (추천)
export OPENAI_API_KEY="your-openai-api-key"

# 또는 프로그램 실행시 직접 입력
```

### 3️⃣ 모델 다운로드 (선택사항)
```bash
python download_multiple_models.py
```

## 🎯 사용법

### 🤖 AI 강화 검색 (추천)
```bash
python menu_search_ai.py
```

### 🔍 기본 벡터 검색
```bash
python menu_search.py
```

### 📊 모델 성능 비교
```bash
python compare_models.py
```

## 💬 실행 예시

### AI 강화 검색 결과:

#### 예시 1: 카드 관련 문의
```
> 이번달 카드 얼마나 썼을까

============================================================
🚀 AI 검색 시작: '이번달 카드 얼마나 썻을까'
============================================================

📝 1단계: 요약 키워드 생성
🔍 AI 요약 키워드: '이번달 카드 얼마나 썻을까' → '카드이용내역'

🔍 2단계: 벡터 검색 (상위 5개 후보)
   찾은 후보 5개:
   1. 카드관리 (유사도: 0.9187)
   2. 금융(카드) (유사도: 0.9126)
   3. 카드 상세 (유사도: 0.9078)
   4. 카드 사용 등록 (유사도: 0.9030)
   5. 카드 명세서 (유사도: 0.9023)

🎯 3단계: AI 최종 선택
🎯 AI 최종 선택: 5번 - 카드 명세서

============================================================
🏆 최종 추천 메뉴
============================================================
📍 페이지명: 카드 명세서
📂 카테고리: 이용내역
🏢 서비스: 카드 명세서
📋 계층구조: 카드 명세서
📊 종합 점수: 0.9023
🔍 AI 생성 대표 검색어: 카드이용내역, 명세서조회, 사용내역, 결제내역, 카드사용
============================================================
```

#### 예시 2: 회원가입 문의
```
> 회원가입 어디서 해야해?

============================================================
🚀 AI 검색 시작: '회원가입 어디서 해야해?'
============================================================

📝 1단계: 요약 키워드 생성
🔍 AI 요약 키워드: '회원가입 어디서 해야해?' → '회원가입'

🔍 2단계: 벡터 검색 (상위 5개 후보)
   찾은 후보 5개:
   1. 회원가입 (유사도: 0.9357)
   2. 회원가입 안내 (유사도: 0.9262)
   3. 이용약관 (유사도: 0.9111)
   4. 이용약관 상세 (유사도: 0.9078)
   5. 서비스 이용약관 (유사도: 0.9039)

🎯 3단계: AI 최종 선택
🎯 AI 최종 선택: 1번 - 회원가입

============================================================
🏆 최종 추천 메뉴
============================================================
📍 페이지명: 회원가입
📂 카테고리: 가입인증
🏢 서비스: 가입
📋 계층구조: 회원가입
📊 종합 점수: 0.9357
🔍 AI 생성 대표 검색어: 회원가입, 신규가입, 계정생성, 가입신청, 회원등록
============================================================
```

## 🛠 기술 스택

### 🤖 AI & ML
- **OpenAI GPT-3.5-turbo**: 키워드 추출 및 메뉴 선택
- **Sentence Transformers**: 벡터 임베딩
- **scikit-learn**: TF-IDF, 코사인 유사도

### 🐍 Python
- **Python 3.13**
- **NumPy**: 수치 연산
- **Warnings**: 경고 처리

## 📁 프로젝트 구조

```
menuSearch/
├── menu_search_ai.py          # 🤖 AI 강화 검색 (NEW!)
├── menu_search.py             # 🔍 기본 벡터 검색
├── download_multiple_models.py # 📥 모델 다운로드
├── compare_models.py          # 📊 모델 성능 비교
├── requirements.txt           # 📦 의존성 (OpenAI 추가)
├── ia-data.json              # 📊 검색 데이터
├── models/                   # 🧠 다운로드된 모델들
└── README.md                 # 📖 이 파일
```

## 🎨 특징

### 🤖 AI 기능
- **자연어 이해**: 복잡한 문장도 정확히 파악  
- **컨텍스트 인식**: 사용자 의도 파악하여 최적 선택
- **실시간 처리**: 빠른 AI 응답 속도

### 🔍 검색 기능
- **고정확도**: 최고 94.48% 유사도
- **다국어**: 한국어 포함 50개 언어 지원
- **자동화**: 최적 모델 자동 선택

## 📈 성능

### 모델 성능
| 모델 | 평균 유사도 | 로드 시간 | 임베딩 시간 |
|------|-------------|-----------|-------------|
| multilingual-e5-small | 94.48% | 1.24초 | 0.414초 |
| ko-sroberta-multitask | 85.23% | 0.38초 | 1.858초 |
| manual_model | 81.80% | 1.14초 | 0.046초 |

### AI 검색 정확도
- **키워드 추출**: GPT-3.5-turbo 기반 높은 정확도
- **최종 선택**: 컨텍스트를 고려한 지능적 판단
- **응답 시간**: 평균 2-3초 내 완료

## 🔑 환경변수 설정

### macOS/Linux
```bash
# ~/.zshrc 또는 ~/.bashrc에 추가
export OPENAI_API_KEY="your-openai-api-key"
source ~/.zshrc
```

### Windows
```cmd
set OPENAI_API_KEY=your-openai-api-key
```

---

*Made with 🤖 AI & ❤️* 